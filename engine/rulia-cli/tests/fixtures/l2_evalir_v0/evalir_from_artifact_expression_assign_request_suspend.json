{
  "artifact_hash": "sha256:1ebadb5fe293bf717271170db85db519ae5867e586a14bac6ec8f08bee043fc1",
  "entry_step_id": "S0001",
  "format_id": "portable_workflow.eval_ir.v0",
  "ir_version": "v0",
  "steps": [
    {
      "next_step_id": "S0002",
      "op": "assign",
      "path": "order.risk_class",
      "step_id": "S0001",
      "value": {
        "$fn": "state",
        "body": {
          "$expr": "if",
          "cond": {
            "$expr": ">=",
            "left": {
              "$expr": "state_get",
              "path": "order.amount"
            },
            "right": 1000
          },
          "else": "standard",
          "then": "high"
        }
      }
    },
    {
      "args": {
        "amount": {
          "$expr": "state_get",
          "path": "order.amount"
        },
        "channel": "email",
        "risk_class": {
          "$expr": "state_get",
          "path": "order.risk_class"
        }
      },
      "capability_id": "capability.approvals",
      "next_step_id": "S0003",
      "op": "request",
      "operation": "submit",
      "step_id": "S0002"
    },
    {
      "op": "end",
      "step_id": "S0003"
    }
  ]
}
